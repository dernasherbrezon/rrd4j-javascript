!function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){return t-t%e}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function t(e){i(this,t),this.dsName=e.getString(),this.dsType=e.getString(),this.heartbeat=e.getLong(),this.minValue=e.getDouble(),this.maxValue=e.getDouble(),this.lastValue=e.getDouble(),this.accumValue=e.getDouble(),this.nanSeconds=e.getLong()},u=function(){function t(e){i(this,t),this.consolFun=e.getString(),this.xff=e.getDouble(),this.steps=e.getInt(),this.rows=e.getInt(),this.headerStep=e.step,this.headerLastUpdateTime=e.lastUpdateTime,this.robins=[];for(var n=0;n<e.dsCount;n++){var r=e.getInt(),s=new h(e);this.robins.push(new o(r,s,this.rows))}for(var a=0;a<this.rows;a++)for(n=0;n<e.dsCount;n++)this.robins[n].data.push(e.getDouble())}return s(t,[{key:"getArcStep",value:function(){return this.headerStep*this.steps}},{key:"getStartTime",value:function(){var t=this.getEndTime(),e=this.getArcStep();return t-(this.rows-1)*e}},{key:"getEndTime",value:function(){return r(this.headerLastUpdateTime,this.getArcStep())}},{key:"getData",value:function(t,e,n){var i=this.getArcStep(),s=r(e,i),a=r(n,i);a<n&&(a+=i);var u=this.getStartTime(),o=this.getEndTime(),h=(a-s)/i+1,c=Math.max(s,u),l=Math.min(a,o),f=[];if(c<=l){var g=(l-c)/i+1,d=(c-u)/i;f=this.robins[t].getValues(d,g)}for(var v=[],p=0;p<h;p++){var b=s+p*i,m=NaN;b>=c&&b<=l&&(m=f[(b-c)/i]),v.push([1e3*(s+p*i),m])}return v}}]),t}(),o=function(){function t(e,n,r){i(this,t),this.pointer=e,this.arcState=n,this.rows=r,this.data=[]}return s(t,[{key:"getValues",value:function(t,e){var n=(this.pointer+t)%this.rows,i=Math.min(this.rows-n,e),r=this.data.slice(n,n+i);if(i<e){var s=e-i,a=this.data.slice(0,0+s);return r.concat(a)}return r}}]),t}(),h=function t(e){i(this,t),this.accumValue=e.getDouble(),this.nanSteps=e.getLong()},c=function(){function t(e){i(this,t),this.data=e,this.index=0,this.signature=this.getString(),this.step=this.getLong(),this.dsCount=this.getInt(),this.arcCount=this.getInt(),this.lastUpdateTime=this.getLong(),this.datasources=[];for(var n=0;n<this.dsCount;n++)this.datasources.push(new a(this));for(this.archives=[],n=0;n<this.arcCount;n++)this.archives.push(new u(this))}return s(t,[{key:"getData",value:function(t,e,n,i){var r=this.getDsIndex(t);if(-1===r)return{};var s=this.getArchive(e,n/1e3,i/1e3);return null===s?{}:{label:t,data:s.getData(r,n/1e3,i/1e3)}}},{key:"getArchive",value:function(t,e,n){for(var i=null,r=null,s=0,a=0,u=0;u<this.arcCount;u++){var o=this.archives[u];if(o.consolFun===t){var h=o.getArcStep(),c=o.getStartTime()-h,l=n-e,f=Math.abs(o.getArcStep()-1);if(c<=e)(null==i||f<s)&&(s=f,i=o);else{var g=l;c>e&&(g-=c-e),(null===r||a<g||a===g&&f<s)&&(r=o,a=g)}}}return null!=i?i:null!=r?r:null}},{key:"getDsIndex",value:function(t){for(var e=0;e<this.dsCount;e++)if(t===this.datasources[e].dsName)return e;return-1}},{key:"getString",value:function(){for(var t="",e=0;e<40;e+=2)t+=String.fromCharCode(this.data[this.index+e+1]);return this.index+=40,t.trim()}},{key:"getDouble",value:function(){var t=new DataView(this.data.buffer,this.index,8),e=t.getFloat64(0,!1);return this.index+=8,e}},{key:"getLong",value:function(){return(this.getInt()<<32)+(4294967295&this.getInt())}},{key:"getInt",value:function(){var t=(this.data[this.index+0]<<24&4278190080)+(this.data[this.index+1]<<16&16711680)+(this.data[this.index+2]<<8&65280)+(this.data[this.index+3]<<0&255);return this.index+=4,t}},{key:"skip",value:function(t){this.index+=t}}]),t}();e.default=c}]);